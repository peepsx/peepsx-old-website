<!DOCTYPE html>
<html lang="en">

<head>
    <title>Become a Member</title>

    <!-- Required Meta Tags Always Come First -->
    <meta charset="utf-8">
    <meta name="title" content="PeepsPatriot membership | Peeps">
    <meta name="description" content="Please fill out the form below to become a PeepsPatriot.">
    <meta name="keywords"
        content="peeps, peepssx, dsocial, dbrowser, dweb, arisen, dwallet, peeros, dsearch, dride, dbuy">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Favicon -->
    <link rel="shortcut icon" href="assets/img/logos/peepsx.png">

    <!-- Google Fonts -->
    <link href="//fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">

    <!-- CSS Global Compulsory -->
    <link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.css">

    <!-- CSS Implementing Plugins -->
    <link rel="stylesheet" href="assets/vendor/font-awesome/css/all.min.css">
    <link rel="stylesheet" href="assets/vendor/custombox/dist/custombox.min.css">
    <link rel="stylesheet" href="assets/vendor/animate.css/animate.min.css">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>


    <!-- CSS Space Template -->
    <link rel="stylesheet" href="assets/css/theme.css">
    <!-- stripe payment js -->
    <script src="https://js.stripe.com/v3/"></script>


</head>

<body onload="showModal()">

    <div id="loading"></div>

    <!-- ========== HEADER ========== -->
    <header id="header" class="u-header u-header--abs-top">
        <div class="u-header__section bg-transparent border-0">
            <div id="logoAndNav" class="container-fluid">
                <!-- Nav -->
                <nav class="navbar navbar-expand justify-content-between u-header__navbar py-3">
                    <!-- Logo -->
                    <div class="col-4 col-sm-6 mobile_menu">
                        <a class="navbar-brand u-header__navbar-brand" href="index.html" aria-label="Distributed Webs">
                            <center><img class="u-header__navbar-brand-default" height="80px"
                                    src="assets/img/logos/peepsx.png" alt="arisen Logo"></center>
                            <img class="u-header__navbar-brand-mobile" width="150px" src="assets/img/logos/peepsx.png"
                                alt="arisen Logo">
                        </a>
                    </div>
                    <!-- End Logo -->

                    <!-- Button -->
                    <div class="col-8 col-sm-6 text-right mobile_menu">
                        <span id="rix-price" class="rsn-price"></span>
                        <a class="btn btn-sm btn-primary" href="https://peepsid.com" role="button" target="_blank">
                            Create PeepsID
                        </a>
                    </div>
                    <!-- End Button -->
                </nav>
                <!-- End Nav -->
            </div>
        </div>
    </header>
    <!-- ========== END HEADER ========== -->

    <!-- ========== MAIN CONTENT ========== -->
    <main id="content" role="main">
        <!-- Hero Section -->
        <div class="bg-img-hero">
            <div class="d-sm-flex align-items-sm-center height-100vh--sm">
                <div class="container text-center space-3-top space-2-bottom space-3-bottom--lg">
                    <div class="w-lg-60 text-center mx-lg-auto content_web">
                        <!-- Title -->
                        <div class="mb-4">
                            <h1 class="display-3 font-size-48--md-down font-weight-medium">become a member.</h1>
                            <p class="lead">
                                Please fill out the form below to become a PeepsPatriot
                            </p>
                            <!-- <form class="custom-form"> -->
                            <div class="form-elements">
                                <div class="two-lables">
                                    <div class="fname up-lable">
                                        <!-- <label>First Name*:</label> -->
                                        <input type="text" maxlength="200" name="First Name" id="fname"
                                            placeholder="First Name*" required>
                                    </div>

                                    <div class="lname up-lable">
                                        <!-- <label>Last Name*:</label> -->
                                        <input type="text" maxlength="200" name="Last Name" placeholder="Last Name*"
                                            id="lname" required>
                                    </div>
                                </div>
                                <div class="two-lables">
                                    <div class="add1 up-lable">
                                        <!-- <label>Address1*:</label> -->
                                        <input type="text" maxlength="200" name="Address1" placeholder="Address1*"
                                            id="addressone" required>
                                    </div>

                                    <div class="add2 up-lable">
                                        <!-- <label>Address2*:</label> -->
                                        <input type="text" maxlength="200" name="Address2" placeholder="Address2*"
                                            id="addresstwo" required>
                                    </div>
                                </div>
                                <div class="two-lables">
                                    <div class="city up-lable">
                                        <!-- <label>City*:</label> -->
                                        <input type="text" maxlength="100" name="City" placeholder="City*" id="city"
                                            required>
                                    </div>
                                    <div class="state up-lable">
                                        <!-- <label> State*:</label> -->
                                        <input type="text" maxlength="100" name="State" placeholder="State*" id="state"
                                            required>
                                    </div>
                                    <div class="zip up-lable">
                                        <!-- <label>Zip Code*:</label> -->
                                        <input type="number" maxlength="10" name="Zip Code" placeholder="Zip Code"
                                            id="zipcode" required>
                                    </div>
                                    <div class="country up-lable">
                                        <!-- <label>Country*:</label> -->
                                        <input type="text" maxlength="200" name="Country" placeholder="Country"
                                            id="country" required>
                                    </div>
                                </div>
                                <div class="two-lables">
                                    <div class="phone up-lable">
                                        <!-- <label>Phone Number*:</label> -->
                                        <input type="number" maxlength="11" name="phone number" placeholder="Phone"
                                            id="phoneno" required>
                                    </div>
                                    <div class="email up-lable">
                                        <!-- <label>Email Id*:</label> -->
                                        <input type="email" maxlength="200" name="email" placeholder="Email" id="email"
                                            required>
                                    </div>
                                </div>
                                <div class="payment">
                                    <p>Payment Options</p>
                                    <div class="flex-container payment-optn">
                                        <div id="paypal-button-container"></div>

                                        <button type="button" class="btn btn-sm btn-blue" data-toggle="modal"
                                            data-target="#myModal">Pay With Card</button>

                                    </div>
                                    <button class="btn btn-sm btn-blue" onclick="peepsmember()">Become a Peeps
                                        Member</button>
                                </div>
                            </div>
                            <!-- </form> -->
                            <a class="btn btn-sm btn-primary " href="https://dsocial.network" role="button"
                                target="_blank">
                                Check Our dSocial </a>

                            <a class="btn btn-sm btn-primary" href="https://peepsx.com/go" role="button"
                                target="_blank">
                                More Peeps Products </a>

                        </div>
                        <!-- End Title -->

                        <!-- Modal stripe payment-->
                        <div class="modal " id="myModal" role="dialog">
                            <div class="modal-dialog">

                                <!-- Modal content-->
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                        <h4 class="modal-title">Subscribe to Stripe Payment</h4>
                                    </div>
                                    <div class="modal-body">
                                        <form class="stripeform">
                                            <label>
                                                <span>Name</span>
                                                <input name="cardholder-name" class="field" placeholder="Jane Doe" />
                                            </label>
                                            <label>
                                                <span>Card</span>
                                                <div id="card-element" class="field"></div>
                                            </label>
                                            <div class="pay-btn"><button type="submit" class="btn btn-sm btn-blue">Pay
                                                    $5</button></div>
                                            <div class="outcome">
                                                <div class="error"></div>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-sm btn-blue"
                                            data-dismiss="modal">Close</button>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <!-- ------------------------------modal stripe ends---------- -->
                    </div>
                </div>
            </div>
        </div>
        <!-- End Hero Section -->

    </main>
    <!-- ========== END MAIN CONTENT ========== -->

    <!-- ========== FOOTER ========== -->
    <footer class="position-absolute-bottom-0--sm">
        <div class="footer_link">
            <ul class="navbar">
                <li>
                    <a href="https://dbrowser.com" target="_blank">dBrowser</a>
                </li>
                <li>
                    <a href="https://github.com/peepsx" target="_blank">Source</a>
                </li>
                <li>
                    <a href="https://dsocial.network" target="_blank">dSocial</a>
                </li>
                <li>
                    <a href="https://peepsid.com" target="_blank">PeepsID</a>
                </li>
                <li>
                    <a href="https://arisen.network" target="_blank">Arisen</a>
                </li>
                <li>
                    <a href="https://dwebs.io" target="_blank">dWeb</a>
                </li>
                <!-- <li style="border-right: none;">
                <a href="https://github.com/arisenio/arisenid-desktop/releases" target="_blank">Download ArisenID</a>
                </li> -->
                <!-- <li style="border-right: none;">
                <a href="https://github.com/arisen/@arisen/" target="_blank">AirDrop</a>
                </li> -->

            </ul>
            <div class="social-icon">
                <li>
                    <a href="https://facebook.com/peepsology" target="_blank" class="facebook"><i
                            class="fab fa-facebook"></i></a>
                </li>
                <li>
                    <a href="https://twitter.com/peepsology" target="_blank" class="twitter"><i
                            class="fab fa-twitter"></i></a>
                </li>
                <li>
                    <a href="https://medium.com/@peepsology" target="_blank" class="google"><i
                            class="fab fa-medium"></i></a>
                </li>
                <li>
                    <a href="https://instagram.com/peepsology" target="_blank" class="instagram"><i
                            class="fab fa-instagram"></i></a>
                </li>
                <li>
                    <a href="https://youtube.com/channel/UCoknUFNMUF9ciA_WGmm8pxQ" target="_blank" class="youtube"><i
                            class="fab fa-youtube"></i></a>
                </li>
                <li style='border-right: none !important'>
                    <a href="https://t.me/peepsology" target="_blank" class="telegram"><i
                            class="fab fa-telegram"></i></a>
                </li>
            </div>
        </div>
        <div class="container text-center space-1">
            <p class="small mb-0">&copy 2020 Peeps. All rights reserved.</p>
        </div>
    </footer>
    <!-- ========== END FOOTER ========== -->

    <!-- JS Global Compulsory -->
    <script src="assets/vendor/jquery/dist/jquery.min.js"></script>
    <script src="assets/vendor/jquery-migrate/dist/jquery-migrate.min.js"></script>
    <script src="assets/vendor/popper.js/dist/umd/popper.min.js"></script>
    <script src="assets/vendor/bootstrap/bootstrap.min.js"></script>

    <!-- JS Implementing Plugins -->
    <script src="assets/vendor/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="assets/vendor/custombox/dist/custombox.min.js"></script>
    <script src="assets/vendor/custombox/dist/custombox.legacy.min.js"></script>
    <script src="assets/vendor/jquery.countdown.min.js"></script>

    <!-- JS Space -->
    <script src="assets/js/hs.core.js"></script>
    <script src="assets/js/components/hs.validation.js"></script>
    <script src="assets/js/helpers/hs.focus-state.js"></script>
    <script src="assets/js/components/hs.modal-window.js"></script>
    <script src="assets/js/components/hs.show-animation.js"></script>
    <script src="assets/js/components/hs.countdown.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.1/axios.min.js"></script>

    <script>
        function showModal() {
            document.getElementById("loading").style.display = "none";
        }
    </script>

    <!-- src="https://www.paypal.com/sdk/js?client-id=AeSkIlCgK1bjX6UPr8w9fDyMD7F5WsuzJWWbgiNSyEi2BnU43V6j5kJbRCK87gk6uYi8HfpyYyCKAzK_&currency=USD"></script> -->
    <script
        src="https://www.paypal.com/sdk/js?client-id=Aes7-mZ9lsMi3h-m6lZ-eIQFBaUoF_hpHW1fF8bEZ5a59vZvzeTg75ZZc78g5h5igwkSABHfvlDQk8VQ&vault=true"
        data-sdk-integration-source="button-factory">
        </script>
    <!-- JS Plugins Init. -->
    <script>
        axios.get('https://nv6khovry9.execute-api.us-east-1.amazonaws.com/dev/rsn_price_from_bts')
            .then(function (response) {
                document.getElementById('rix-price').innerHTML = `RIX: $ ${parseFloat(response.data.data.USD.price).toFixed(4)}`;
            })
            .catch(function (error) {
                console.log(error)
            });
    </script>

    <script>
        // Render the PayPal button into #paypal-button-container
        paypal.Buttons({



            // createOrder: function (data, actions) {
            //     console.log('=========createorder====', data, actions)
            //     return actions.order.create({
            //         purchase_units: [{
            //             amount: {
            //                 value: '5.00'
            //             }
            //         }]
            //     });
            // },

            // onApprove: function (data, actions) {
            //     return actions.order.capture().then(function (details) {
            //         console.log('=======daetails', details, data, actions)
            //         // Show a success message to the buyer
            //         alert('Transaction completed by ' + details.payer.name.given_name + '!');
            //     });
            // },

            //button style
            style: {
                layout: 'horizontal',
                color: 'blue',
                shape: 'pill',
                height: 40,
                label: 'subscribe',
                tagline: false
            },

            createSubscription: function (data, actions) {

                return actions.subscription.create({
                    'plan_id': 'P-7MG6534019154735TL4FSIZI'
                });
            },
            onCancel: function (data) {
                swal({title:"User has cancelled the payment.",icon:'warning'});
                document.getElementById("loading").style.display = "none";

            },
            onApprove: function (data, actions) {
                swal("Your payment is Successful.", `Your SubscriptionId is: ${data.subscriptionID}`, "success");
                
                let object = {
                    "orderID": data.orderID,
                    "billingToken": data.billingToken,
                    "subscriptionID": data.subscriptionID,
                    "facilitatorAccessToken": data.facilitatorAccessToken
                }

                axios.post('https://payments.peepsx.com/users/paypalpayment', object).then((result) => {
                    localStorage.setItem("paypalsubId", data.subscriptionID)
                    localStorage.setItem("paypalstatus", "active")
                    localStorage.setItem('paymentType', "paypal")
                }).catch((error) => {
                    console.log(error)
                })

            }
        }).render('#paypal-button-container');
    </script>

    <!-- =============modal start========== -->
    <script>
        // Get the modal
        var modal = document.getElementById("myModal");
        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];
        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function (event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
    </script>
    <!-- ============modal ends=========== -->

    <script>
        var stripe = Stripe('pk_live_51H0hOeJ5nSY4c5DAvFEuc6pmikZ6QUcUTTbbe9duhfYsUCadDTukQRP077ZzOS7GSmJVQWZFskgX4tAQVgJmnGCL00Iw2Cy1Tz');
        var elements = stripe.elements({
            fonts: [
                {
                    family: 'Open Sans',
                    weight: 400,
                    src: 'local("Open Sans"), local("OpenSans"), url(https://fonts.gstatic.com/s/opensans/v13/cJZKeOuBrn4kERxqtaUH3ZBw1xU1rKptJj_0jans920.woff2) format("woff2")',
                    unicodeRange: 'U+0000-00FF, U+0131, U+0152-0153, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2212, U+2215',
                },
            ]
        });

        var card = elements.create('card', {
            hidePostalCode: true,
            style: {
                base: {
                    iconColor: '#F99A52',
                    color: 'black',
                    lineHeight: '48px',
                    fontWeight: 400,
                    fontFamily: '"Open Sans", "Helvetica Neue", "Helvetica", sans-serif',
                    fontSize: '15px',
                    '::placeholder': {
                        color: '#CFD7DF',
                    }
                },
            }
        });
        card.mount('#card-element');

        function setOutcome(result, name) {
            // var successElement = document.querySelector('.success');
            var errorElement = document.querySelector('.error');
            // successElement.classList.remove('visible');
            errorElement.classList.remove('visible');

            if (result.token) {

                this.payment(result.token, name)


                $('#myModal').modal('hide');

                document.getElementById("loading").style.display = "block";

                // Use the token to create a charge or a customer
                // https://stripe.com/docs/charges
                //successElement.querySelector('.token').textContent = result.token.id;
                //successElement.classList.add('visible');
            } else if (result.error) {
                errorElement.textContent = result.error.message;
                errorElement.classList.add('visible');
            }
        }

        card.on('change', function (event) {
            setOutcome(event);
        });

        document.querySelector('.stripeform').addEventListener('submit', function (e) {
            e.preventDefault();

            var form = document.querySelector('.stripeform');
            var extraDetails = {
                name: form.querySelector('input[name=cardholder-name]').value,
            };
            stripe.createToken(card, extraDetails).then(result => {
                setOutcome(result, extraDetails.name)
            });
        });

        async function payment(token, name) {
            let object = {
                "name": name,
                "token": token.id
            }
            axios.post('https://payments.peepsx.com/users/payment', object).then((result) => {
                localStorage.setItem("stripedata", result.data.data.id)
                localStorage.setItem("stripestatus", result.data.data.status)
                localStorage.setItem('paymentType', "Stripe")
                document.getElementById("loading").style.display = "none";
                swal("Your payment is Successful.", `Your SubscriptionId is: ${result.data.data.id}`, "success");
            }).catch((error) => {
                console.log('error block stripe payment', error)
            })
        }
    </script>

    <script>
        function peepsmember() {
            //commont type
            let paymenttype = localStorage.getItem('paymentType')
            //let regemail = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
            let fname = document.getElementById('fname').value
            let lname = document.getElementById('lname').value
            let addressone = document.getElementById('addressone').value
            let addresstwo = document.getElementById('addresstwo').value
            let city = document.getElementById('city').value
            let state = document.getElementById('state').value
            let zipcode = document.getElementById('zipcode').value
            let country = document.getElementById('country').value
            let phoneno = document.getElementById('phoneno').value
            let email = document.getElementById('email').value
            if (fname == "" || fname == null) {
                swal({ title: "Enter first name!", icon: "warning" });
                return
            } else if (!isNaN(fname)) {
                swal({ title: "Enter valid first name!", icon: "warning" });
                return
            } else if (lname == "" || lname == null) {
                swal({ title: "Enter your last name!", icon: "warning" });
                return
            } else if (!isNaN(lname)) {
                swal({ title: "Enter valid last name!", icon: "warning" });
                return
            } else if (addressone == "" || addressone == null) {
                swal({ title: "Enter your first address!", icon: "warning" });
                return
            } else if (addresstwo == "" || addresstwo == null) {
                swal({ title: "Enter your second address!", icon: "warning" });
                return
            } else if (city == "" || city == null) {
                swal({ title: "Enter city name!", icon: "warning" });
                return
            } else if (!isNaN(city)) {
                swal({ title: "Enter valid city name!", icon: "warning" });
                return
            } else if (state == "" || state == null) {
                swal({ title: "Enter your state name!", icon: "warning" });
                return
            } else if (!isNaN(state)) {
                swal({ title: "Enter valid state name!", icon: "warning" });
                return
            } else if (zipcode == "" || zipcode == null) {
                swal({ title: "Enter your zipcoe!", icon: "warning" });
                return
            } else if (country == "" || country == null) {
                swal({ title: "Enter your country name!", icon: "warning" });
                return
            } else if (!isNaN(country)) {
                swal({ title: "Enter valid country name!", icon: "warning" });
                return
            } else if (phoneno == "" || phoneno == null) {
                swal({ title: "Enter your phone number!", icon: "warning" });
                return
            } else if (email == "" || email == null) {
                swal({ title: "Enter your Email!", icon: "warning" });
                return
            } else {
                if (paymenttype == 'Stripe') {
                    let subsid = localStorage.getItem('stripedata')
                    let subsstatus = localStorage.getItem('stripestatus')
                    let objdata = {
                        "fName": fname,
                        "lName": lname,
                        "addressOne": addressone,
                        "addressTwo": addresstwo,
                        "city": city,
                        "state": state,
                        "zipcode": zipcode,
                        "country": country,
                        "phoneNo": phoneno,
                        "email": email,
                        "paymenttype": paymenttype,
                        "subscriptionId": subsid,
                        "subscriptionStatus": subsstatus
                    }
                    axios.post('https://payments.peepsx.com/users/saveuser', objdata).then((response) => {
                        if (response) {
                            console.log(response.data)
                            swal({ title: `${response.data.message}`, icon: "warning" });
                            if (response.data.status) {
                                localStorage.clear()
                            }
                        } else {
                            swal({ title: "Something went wrong,Please try again!", icon: "warning" });
                        }
                    }).catch((error) => {
                        console.log(error)
                    })
                }
                else if (paymenttype == 'paypal') {
                    let subsid = localStorage.getItem("paypalsubId")
                    let subsstatus = localStorage.getItem("paypalstatus")
                    let objdata = {
                        "fName": fname,
                        "lName": lname,
                        "addressOne": addressone,
                        "addressTwo": addresstwo,
                        "city": city,
                        "state": state,
                        "zipcode": zipcode,
                        "country": country,
                        "phoneNo": phoneno,
                        "email": email,
                        "paymenttype": paymenttype,
                        "subscriptionId": subsid,
                        "subscriptionStatus": subsstatus
                    }
                    axios.post('https://payments.peepsx.com/users/saveuser', objdata).then((response) => {
                        if (response) {
                            console.log(response.data)
                            swal({ title: "You are peeps member now.", icon: "success" });
                            localStorage.clear()
                        } else {
                            swal({ title: "Something went wrong,Please try again!", icon: "warning" });
                        }
                    }).catch((error) => {
                        console.log(error)
                    })
                }
                else {
                    swal({ title: "Please complete your payment!", icon: "warning" });
                }
            }
        }
    </script>
</body>

</html>